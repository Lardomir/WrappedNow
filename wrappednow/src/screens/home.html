<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>WrappedNow - Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="wrappednow/www/css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* This CSS is for the new home page elements */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            width: 100%;
        }

        .user-info-header {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .profile-picture {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #fff;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            width: 100%;
            margin-bottom: 2rem;
        }

        .stat-card {
            background-color: #212121;
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .stat-label {
            font-size: 0.8rem;
            color: #b3b3b3;
            margin-bottom: 0.5rem;
            font-weight: 400;
        }

        .stat-value {
            font-size: 1rem;
            font-weight: 700;
            color: #fff;
        }

        .action-card {
            display: flex;
            align-items: center;
            background-color: #212121;
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            width: 100%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .action-card:hover {
            background-color: #333;
        }

        .action-card svg {
            margin-right: 1rem;
            fill: currentColor;
            width: 24px;
            height: 24px;
        }

        .action-card-text {
            flex-grow: 1;
        }

        .arrow-icon {
            width: 16px;
            height: 16px;
            fill: #b3b3b3;
        }

    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="user-info-header">
                <h1>Welcome back,<span id="user-display-name">David!</span></h1>
            </div>
            <img id="user-profile-pic" src="img/user-default.png" alt="Profile Picture" class="profile-picture">
        </div>

        <div class="stat-grid">
            <div class="stat-card">
                <p class="stat-label">Top Song</p>
                <p class="stat-value" id="top-song-value">Blinding Lights</p>
            </div>
            <div class="stat-card">
                <p class="stat-label">Top Artist</p>
                <p class="stat-value" id="top-artist-value">The Weeknd</p>
            </div>
            <div class="stat-card">
                <p class="stat-label">Minutes Listened</p>
                <p class="stat-value" id="minutes-listened-value">34</p>
            </div>
        </div>

        <div class="action-card" onclick="goToPage('wrapped.html')">
            <svg class="spiral-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M10 2a8 8 0 0 1 8 8c0 1.98-.38 3.87-1.04 5.61a.9.9 0 0 1-1.63-.52c-.67-1.8-1.01-3.7-1.01-5.65a4 4 0 0 0-8 0c0 1.95.34 3.85 1.01 5.65a.9.9 0 0 1-1.63.52C6.38 13.87 6 11.98 6 10a8 8 0 0 1 8-8zM12 21a9 9 0 1 1 0-18"/>
            </svg>
            <span class="action-card-text">View Wrapped</span>
            <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        </div>

        <div class="action-card" onclick="goToPage('musicMap.html')">
            <svg class="map-pin-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <span class="action-card-text">Music Map</span>
            <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        </div>

        <div class="action-card" onclick="goToPage('dailyTrends.html')">
            <svg class="line-chart-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 15L9 9L15 15L21 9"></path>
                <path d="M18 15L21 15L21 12"></path>
            </svg>
            <span class="action-card-text">Daily Trends</span>
            <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        </div>

        <button id="logout-btn" onclick="logout()">LOGOUT</button>
    </div>

    <script src="cordova.js"></script>
    <script>
        function goToPage(page) {
            window.location.href = page;
        }

        function logout() {
            // Placeholder for your logout logic
            window.localStorage.removeItem('spotify_access_token');
            window.localStorage.removeItem('spotify_refresh_token');
            window.localStorage.removeItem('spotify_code_verifier');
            window.location.href = 'index.html';
        }

        document.addEventListener('deviceready', function() {
            const userData = JSON.parse(window.localStorage.getItem('spotify_user_data'));
            if (userData) {
                document.getElementById('user-display-name').textContent = userData.display_name;
                // Add logic here to display the user's top song, artist, and minutes listened
                // You will need to fetch this data from the Spotify API.
                // For now, the values are placeholders from your image.
            }
        });
    </script>
</body>
</html>